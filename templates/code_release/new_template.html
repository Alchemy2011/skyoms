{% extends 'base.html' %}

{% block header_content %}
<style>
.center {
 width: auto;
 display: table;
 margin-left: auto;
 margin-right: auto;
}
.text-center {
 text-align: center;
}
</style>
<!-- Datatable -->
<link href="/static/plugins/datatables/css/jquery.dataTables_themeroller.css" rel="stylesheet">
{% endblock %}



{% block container %}
<div id="main-container">
	<div class="padding-md">
		<div class="row">
			<div class="col-md-12">
				<div class="panel panel-default">
					<div class="no-margin" id="formValidate1" data-validate="parsley" novalidate="">
						<div class="panel-heading">
							新建发布模板
						</div>
						<div class="panel-body">
							<div class="row">
								<div class="col-md-12">
                                    <div class="form-group">
                                        <label class="col-lg-1 control-label">模板名称</label>
                                        <div class="col-lg-4">
                                            <input class="form-control" type="text">
                                        </div><!-- /.col -->
                                    </div>
								</div><!-- /.col -->
							</div><!-- /.row -->
                            <div class="seperator"></div>
                            <div class="seperator"></div>
							<div class="row">
								<div class="col-md-12">
                                    <div class="form-group">
                                        <label class="col-lg-1 control-label">路径</label>
                                        <div class="col-lg-4">
                                            <input class="form-control" type="text">
                                        </div><!-- /.col -->
                                    </div>
								</div><!-- /.col -->
							</div><!-- /.row -->
                            <div class="seperator"></div>
                            <div class="seperator"></div>
							<div class="row">
								<div class="col-md-12">
                                    <div class="form-group">
                                        <label class="col-lg-1 control-label">服务器</label>
                                        <div class="col-lg-10">
                                            <div class="row">
                                                <div class="col-lg-3">
                                                    <input type="text" class="form-control" placeholder="可选">
                                                </div><!-- /.col -->
                                                <div class="col-lg-2"></div>
                                                <div class="col-lg-3" style="padding-left: 0px;">
                                                    <input type="text" class="form-control" placeholder="已选">
                                                </div><!-- /.col -->
                                            </div><!-- /.row -->
                                        </div><!-- /.col -->
                                    </div>
								</div><!-- /.col -->
							</div><!-- /.row -->
                            <div class="row">
								<div class="col-md-12">
                                    <div class="form-group">
                                        <label class="col-lg-1"></label>
                                        <div class="col-lg-4">
                                            <select multiple="" class="form-control" style="height: 180px">
                                            </select>
                                        </div><!-- /.col -->
                                        <div class="col-lg-1" style="padding-left: 0px;padding-right: 0px;margin-top: 60px;">
                                            <table>
                                                <tr>
                                                   <td>
                                                        <button class="btn btn-sm" type="button">
                                                            <i class="fa fa-chevron-right"></i>
                                                            <i class="fa fa-chevron-right"></i>
                                                        </button>
                                                   </td>
                                                </tr>
                                                <tr><td></td></tr>
                                                <tr>
                                                   <td>
                                                        <button class="btn btn-sm" type="button">
                                                            <i class="fa fa-chevron-left"></i>
                                                            <i class="fa fa-chevron-left"></i>
                                                        </button>
                                                   </td>
                                                </tr>
                                            </table>
                                        </div>
                                        <div class="col-lg-4">
                                            <select multiple="" class="form-control" style="height: 180px">
                                            </select>
                                        </div><!-- /.col -->
                                    </div>
								</div><!-- /.col -->
							</div><!-- /.row -->
						</div>
						<div class="panel-footer text-left">
							<button id="save" type="button" class="btn btn-success">保存</button>
						</div>
					</div>
				</div><!-- /panel -->
			</div><!-- /.col-->
		</div>
	</div>
</div><!-- /main-container -->
{% endblock %}


{% block footer_content %}
<script src="/static/plugins/layer/layer.js"></script> {# 加载layer控件，实现弹出框 #}
<!-- Parsley表单验证 -->
<script src="/static/template/js/parsley.min.js"></script>
<script>
/*
*保存数据
*/
$('#save').click(function(){
    var project_name = $("#project_name").val();
    var in_ip = $("#in_ip").val();
    var ex_ip = $("#ex_ip").val();
    var position = $("#position").val();
    data = {"project_name":project_name,"in_ip":in_ip,"ex_ip":ex_ip,"position":position};
    data = JSON.stringify(data);
    var url = "/cmdb/server_add/";

    $.get(url,{data:data},function(msg){
    	ajax_callback(msg);
     });
});


/*
*ajax get callback
*/
function ajax_callback(msg){
    var msg =  $.parseJSON(msg);
    var index = layer.alert(msg, {
        skin: 'layui-layer-molv' //样式类名
    },function(){
        if (msg == '成功'){
            window.location="/cmdb/server_list/";
        }
        else{
           layer.close(index)
        }
    });
}
</script>
{% endblock %}
